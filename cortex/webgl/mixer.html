{% autoescape None %}
{% extends template.html %}
{% block jsinit %}
    var viewers = {}, figure, grid, sock, viewopts;
{% end %}
{% block onload %}
		viewopts = {
			voxlines: {{voxlines}},
			voxline_width: {{voxline_width}},
		};

		var viewer;
		var subjects = {{subjects}};
		var datasets = classify({{data}});

		figure = new jsplot.W2Figure();
		grid = figure.add(jsplot.GridFigure, "main", true, n, n);
		for (var i = 0; i < subjects.length; i++) {
			viewer = grid.add(mriview.Viewer, i);
			viewer.load("/ctm/"+subject[i]);

			for (var j = 0; j < datasets.length; j++)

			viewer.addData()
			viewers[subjects[i]] = viewer;
		}

		sock = new Websock();
{% end %}